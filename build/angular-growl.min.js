/**
 * angular-growl-v2 - v0.7.3 - 2015-01-28
 * http://janstevens.github.io/angular-growl-2
 * Copyright (c) 2015 Marco Rinck,Jan Stevens; Licensed MIT
 */
angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",[function(){"use strict";return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"=",limitMessages:"="},controller:["$scope","$timeout","growl","growlMessages",function(a,b,c,d){a.referenceId=a.reference||0,a.growlMessages=d,a.inlineMessage=angular.isDefined(a.inline)?a.inline:c.inlineMessages();var e=d.initDirective(a.referenceId,a.limitMessages);a.$watch("limitMessages",function(a){angular.isUndefined(a)||(e.limitMessages=a)}),a.stopTimeoutClose=function(a){a.clickToClose||(angular.forEach(a.promises,function(a){b.cancel(a)}),a.close?e.deleteMessage(a):a.close=!0)},a.alertClasses=function(a){return{"alert-success":"success"===a.severity,"alert-error":"error"===a.severity,"alert-danger":"error"===a.severity,"alert-info":"info"===a.severity,"alert-warning":"warning"===a.severity,icon:a.disableIcons===!1,"alert-dismissable":!a.disableCloseButton}},a.showCountDown=function(a){return!a.disableCountDown&&a.ttl>0},a.wrapperClasses=function(){var b={};return b["growl-fixed"]=!a.inlineMessage,b[c.position()]=!0,b},a.computeTitle=function(a){var b={success:"Success",error:"Error",info:"Information",warn:"Warning"};return b[a.severity]},a.getMessages=function(){var a=e.messages;return d.reverseOrder?a.slice().reverse():a},a.deleteMessage=function(a){e.deleteMessage(a)}}]}}]),angular.module("angular-growl").run(["$templateCache",function(a){"use strict";void 0===a.get("templates/growl/growl.html")&&a.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()" ng-show="getMessages().length > 0"><div class="growl-item alert" ng-repeat="message in getMessages()" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="growl-message" ng-bind-html="message.text"></div></div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict";var a={success:null,error:null,warning:null,info:null},b="messages",c="text",d="title",e="severity",f=!0,g="variables",h=0,i=!1,j="top-right",k=!1,l=!1,m=!1,n=!1,o=!0;this.globalTimeToLive=function(b){if("object"==typeof b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);else for(var d in a)a.hasOwnProperty(d)&&(a[d]=b)},this.globalTranslateMessages=function(a){o=a},this.globalDisableCloseButton=function(a){k=a},this.globalDisableIcons=function(a){l=a},this.globalReversedOrder=function(a){m=a},this.globalDisableCountDown=function(a){n=a},this.messageVariableKey=function(a){g=a},this.globalInlineMessages=function(a){i=a},this.globalPosition=function(a){j=a},this.messagesKey=function(a){b=a},this.messageTextKey=function(a){c=a},this.messageTitleKey=function(a){d=a},this.messageSeverityKey=function(a){e=a},this.onlyUniqueMessages=function(a){f=a},this.serverMessagesInterceptor=["$q","growl",function(a,c){function d(a){void 0!==a&&a.data[b]&&a.data[b].length>0&&c.addServerMessages(a.data[b])}return{response:function(a){return d(a),a},responseError:function(b){return d(b),a.reject(b)}}}],this.$get=["$rootScope","$interpolate","$sce","$filter","$timeout","growlMessages",function(b,p,q,r,s,t){function u(a){if(G&&a.translateMessage)a.text=G(a.text,a.variables);else{var c=p(a.text);a.text=c(a.variables)}var d=t.addMessage(a);return b.$broadcast("growlMessage",a),s(function(){},0),d}function v(b,c,d){var e,f=c||{};return e={text:b,title:f.title,severity:d,ttl:f.ttl||a[d],variables:f.variables||{},disableCloseButton:void 0===f.disableCloseButton?k:f.disableCloseButton,disableIcons:void 0===f.disableIcons?l:f.disableIcons,disableCountDown:void 0===f.disableCountDown?n:f.disableCountDown,position:f.position||j,referenceId:f.referenceId||h,translateMessage:void 0===f.translateMessage?o:f.translateMessage,destroy:function(){t.deleteMessage(e)},setText:function(a){e.text=q.trustAsHtml(String(a))},onclose:f.onclose,onopen:f.onopen},u(e)}function w(a,b){return v(a,b,"warning")}function x(a,b){return v(a,b,"error")}function y(a,b){return v(a,b,"info")}function z(a,b){return v(a,b,"success")}function A(a,b,c){c=(c||"error").toLowerCase(),v(a,b,c)}function B(a){if(a&&a.length){var b,f,h,i;for(i=a.length,b=0;i>b;b++)if(f=a[b],f[c]){h=(f[e]||"error").toLowerCase();var j={};j.variables=f[g]||{},j.title=f[d],v(f[c],j,h)}}}function C(){return f}function D(){return m}function E(){return i}function F(){return j}var G;t.onlyUnique=f,t.reverseOrder=m;try{G=r("translate")}catch(H){}return{warning:w,error:x,info:y,success:z,general:A,addServerMessages:B,onlyUnique:C,reverseOrder:D,inlineMessages:E,position:F}}]}),angular.module("angular-growl").service("growlMessages",["$sce","$timeout",function(a,b){"use strict";function c(){this.messages=[],this.limitMessages=void 0}var d=this;c.prototype.cutMessages=function(){var a=this.limitMessages;if(angular.isNumber(a)&&a>0){var b=this.messages,c=b.length-a;c>0&&b.splice(0,c)}},c.prototype.destroyAllMessages=function(){for(var a=this.messages,b=a.length-1;b>=0;b--)a[b].destroy();this.messages=[]},c.prototype.addMessage=function(c){var e=this.messages;if(d.onlyUnique)for(var f,g,h=e.length-1;h>=0;h--)if(f=e[h],g=a.getTrustedHtml(f.text),c.text===g&&c.severity===f.severity&&c.title===f.title)return null;if(c.text=a.trustAsHtml(String(c.text)),c.ttl&&-1!==c.ttl&&(c.countdown=c.ttl/1e3,c.promises=[],c.close=!1,c.countdownFunction=function(){c.countdown>1?(c.countdown--,c.promises.push(b(c.countdownFunction,1e3))):c.countdown--}),e.push(c),this.cutMessages(),angular.isFunction(c.onopen)&&c.onopen(),c.ttl&&-1!==c.ttl){var i=this;c.promises.push(b(function(){i.deleteMessage(c)},c.ttl)),c.promises.push(b(c.countdownFunction,1e3))}return c},c.prototype.deleteMessage=function(a){var b=this.messages,c=b.indexOf(a);c>-1&&(b[c].close=!0,b.splice(c,1),angular.isFunction(a.onclose)&&a.onclose())},this.directives={},this.getDirective=function(a){return a=a||0,this.directives[a]||(this.directives[a]=new c),this.directives[a]},this.initDirective=function(a,b){var c=this.getDirective(a);return c.limitMessages=b,c.cutMessages(),c},this.getAllMessages=function(a){var b=this.getDirective(a);return b.messages},this.destroyAllMessages=function(a){var b=this.getDirective(a);return b.destroyAllMessages()},this.addMessage=function(a){var b=this.getDirective(a.referenceId);return b.addMessage(a)},this.deleteMessage=function(a){var b=this.getDirective(a.referenceId);return b.deleteMessage(a)}}]);